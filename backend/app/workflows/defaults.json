{
  "default_end_message": "Workflow terminé",
  "default_workflow_slug": "workflow-par-defaut",
  "default_workflow_display_name": "Workflow par défaut",
  "supported_agent_keys": [
    "get_data_from_user",
    "get_data_from_web",
    "r_dacteur",
    "triage",
    "triage_2"
  ],
  "expected_state_slugs": [
    "maj-etat-triage",
    "maj-etat-validation"
  ],
  "default_agent_slugs": [
    "analyse",
    "collecte-utilisateur",
    "collecte-web",
    "finalisation",
    "validation"
  ],
  "default_workflow_graph": {
    "nodes": [
      {
        "slug": "start",
        "kind": "start",
        "display_name": "Début",
        "is_enabled": true,
        "parameters": {},
        "metadata": {
          "position": {
            "x": 0,
            "y": 0
          }
        }
      },
      {
        "slug": "analyse",
        "kind": "agent",
        "agent_key": "triage",
        "display_name": "Analyse des informations",
        "is_enabled": true,
        "parameters": {},
        "metadata": {
          "position": {
            "x": 240,
            "y": 0
          }
        }
      },
      {
        "slug": "maj-etat-triage",
        "kind": "state",
        "display_name": "Mise à jour de l'état (analyse)",
        "is_enabled": true,
        "parameters": {
          "state": [
            {
              "target": "state.has_all_details",
              "expression": "input.output_parsed.has_all_details"
            },
            {
              "target": "state.infos_manquantes",
              "expression": "input.output_text"
            },
            {
              "target": "state.should_finalize",
              "expression": "input.output_parsed.has_all_details"
            }
          ]
        },
        "metadata": {
          "position": {
            "x": 370,
            "y": -80
          }
        }
      },
      {
        "slug": "infos-completes",
        "kind": "condition",
        "display_name": "Toutes les informations?",
        "is_enabled": true,
        "parameters": {
          "mode": "truthy",
          "path": "has_all_details"
        },
        "metadata": {
          "position": {
            "x": 500,
            "y": 0
          }
        }
      },
      {
        "slug": "collecte-web",
        "kind": "agent",
        "agent_key": "get_data_from_web",
        "display_name": "Collecte web",
        "is_enabled": true,
        "parameters": {},
        "metadata": {
          "position": {
            "x": 500,
            "y": 180
          }
        }
      },
      {
        "slug": "validation",
        "kind": "agent",
        "agent_key": "triage_2",
        "display_name": "Validation",
        "is_enabled": true,
        "parameters": {},
        "metadata": {
          "position": {
            "x": 760,
            "y": 180
          }
        }
      },
      {
        "slug": "maj-etat-validation",
        "kind": "state",
        "display_name": "Mise à jour de l'état (validation)",
        "is_enabled": true,
        "parameters": {
          "state": [
            {
              "target": "state.has_all_details",
              "expression": "input.output_parsed.has_all_details"
            },
            {
              "target": "state.infos_manquantes",
              "expression": "input.output_text"
            },
            {
              "target": "state.should_finalize",
              "expression": "input.output_parsed.has_all_details"
            }
          ]
        },
        "metadata": {
          "position": {
            "x": 900,
            "y": 120
          }
        }
      },
      {
        "slug": "pret-final",
        "kind": "condition",
        "display_name": "Prêt pour finalisation?",
        "is_enabled": true,
        "parameters": {
          "mode": "truthy",
          "path": "should_finalize"
        },
        "metadata": {
          "position": {
            "x": 1020,
            "y": 180
          }
        }
      },
      {
        "slug": "collecte-utilisateur",
        "kind": "agent",
        "agent_key": "get_data_from_user",
        "display_name": "Collecte utilisateur",
        "is_enabled": true,
        "parameters": {},
        "metadata": {
          "position": {
            "x": 1020,
            "y": 340
          }
        }
      },
      {
        "slug": "finalisation",
        "kind": "agent",
        "agent_key": "r_dacteur",
        "display_name": "Rédaction",
        "is_enabled": true,
        "parameters": {},
        "metadata": {
          "position": {
            "x": 1300,
            "y": 0
          }
        }
      },
      {
        "slug": "end",
        "kind": "end",
        "display_name": "Fin",
        "is_enabled": true,
        "parameters": {
          "message": "Workflow terminé",
          "status": {
            "type": "closed",
            "reason": "Workflow terminé"
          }
        },
        "metadata": {
          "position": {
            "x": 1550,
            "y": 0
          }
        }
      }
    ],
    "edges": [
      {
        "source": "start",
        "target": "analyse",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "analyse",
        "target": "maj-etat-triage",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "maj-etat-triage",
        "target": "infos-completes",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "infos-completes",
        "target": "finalisation",
        "condition": "true",
        "metadata": {
          "label": "Oui"
        }
      },
      {
        "source": "infos-completes",
        "target": "collecte-web",
        "condition": "false",
        "metadata": {
          "label": "Non"
        }
      },
      {
        "source": "collecte-web",
        "target": "validation",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "validation",
        "target": "maj-etat-validation",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "maj-etat-validation",
        "target": "pret-final",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "pret-final",
        "target": "finalisation",
        "condition": "true",
        "metadata": {
          "label": "Oui"
        }
      },
      {
        "source": "pret-final",
        "target": "collecte-utilisateur",
        "condition": "false",
        "metadata": {
          "label": "Non"
        }
      },
      {
        "source": "collecte-utilisateur",
        "target": "finalisation",
        "metadata": {
          "label": ""
        }
      },
      {
        "source": "finalisation",
        "target": "end",
        "metadata": {
          "label": ""
        }
      }
    ]
  }
}