# Exemple de configuration pour le backend et le frontend ChatKit
# Dupliquez ce fichier en `.env` (à la racine) et adaptez les valeurs.

# --- Backend FastAPI ---
# Fournisseur LLM utilisé par le backend ("openai" par défaut).
# Basculez sur "litellm" pour pointer vers un proxy LiteLLM compatible OpenAI,
# ou fournissez vos propres variables `MODEL_API_BASE` / `MODEL_API_KEY_ENV`.
# MODEL_PROVIDER="openai"

# Configuration OpenAI (active lorsque MODEL_PROVIDER=openai).
# Clé API OpenAI disposant de l'accès ChatKit (obligatoire dans ce mode)
OPENAI_API_KEY="sk-your-openai-api-key"
# URL de base de l'API OpenAI (optionnel)
# CHATKIT_API_BASE="https://api.openai.com"

# Connexion base de données requise par le backend et les workers Celery
# DATABASE_URL="postgresql+psycopg://chatkit:chatkit@localhost:5432/chatkit"
# # Exemple SQLite pour un développement rapide : DATABASE_URL="sqlite:///./chatkit.db"

# Configuration LiteLLM (ex : proxy local servant plusieurs fournisseurs LLM)
# MODEL_PROVIDER="litellm"                  # active l'utilisation du proxy LiteLLM
# LITELLM_PORT=4000                         # port d'écoute du service LiteLLM local
# LITELLM_API_BASE="http://127.0.0.1:4000" # URL de votre proxy LiteLLM (surchargeable si déployé ailleurs)
# LITELLM_API_KEY="sk-litellm-proxy"       # clé partagée utilisée par le backend/celery pour appeler le proxy
# LITELLM_MASTER_KEY="sk-1234"             # master key configurée côté LiteLLM (utilisez la même valeur que LITELLM_API_KEY)
# LITELLM_SALT_KEY="sk-XXXXXXXX"           # clé de chiffrement LiteLLM (NE LA CHANGEZ PLUS APRÈS L'INITIALISATION)
# LITELLM_DATABASE_URL="postgresql://..."  # DSN dédié utilisé par LiteLLM quand STORE_MODEL_IN_DB=True.
#                                          # Par défaut, docker-compose expose postgresql://litellm:litellm@localhost:5433/litellm
#                                          # via le service `litellm-db`. Adaptez l'hôte/port si vous déportez la base.
# LITELLM_DB_PORT=5433                     # Port d'écoute du service Postgres LiteLLM (utile si vous avez déjà un Postgres sur 5433).
# LITELLM_POSTGRES_DB="litellm"            # Nom de la base utilisée par LiteLLM dans `litellm-db`.
# LITELLM_POSTGRES_USER="litellm"          # Identifiants par défaut du service Postgres LiteLLM.
# LITELLM_POSTGRES_PASSWORD="litellm"
# STORE_MODEL_IN_DB="True"                 # active la persistance des modèles LiteLLM (exige LITELLM_DATABASE_URL + LITELLM_SALT_KEY).
#                                          # Laissez cette variable commentée/absente si vous ne voulez pas persister les modèles.
# PORT=4000                                 # requis sur certaines plateformes (Render/Railway) pour exposer le port du proxy
# # Ajoutez également dans ce fichier les clés des fournisseurs cibles attendues
# # par LiteLLM : OPENAI_API_KEY, ANTHROPIC_API_KEY, GEMINI_API_KEY,
# # MISTRAL_API_KEY (+ éventuellement MISTRAL_API_BASE=https://api.mistral.ai/v1), AZURE_OPENAI_API_KEY, etc. LiteLLM les lit
# # directement et les utilise pour router les requêtes vers chaque modèle.

# Configuration avancée (fournisseur personnalisé compatible OpenAI)
# MODEL_API_BASE="https://mon-proxy-openai.example.com" # surcharge explicite de l'URL de base
# MODEL_API_KEY_ENV="CUSTOM_PROVIDER_API_KEY"          # variable contenant la clé à utiliser
# CUSTOM_PROVIDER_API_KEY="sk-proxy-..."

# Modèle, instructions et voix par défaut pour les sessions vocales Realtime (optionnels)
# CHATKIT_REALTIME_MODEL="gpt-4o-realtime-preview-2024-12-17" # utilisé lorsque le frontend ne précise rien
# CHATKIT_REALTIME_INSTRUCTIONS="Tu accompagnes les utilisateurs en voix" # consignes transmises au serveur Realtime
# CHATKIT_REALTIME_VOICE="verse" # voix Realtime sélectionnée par défaut

# Origines autorisées pour les requêtes navigateur (optionnel, séparées par des virgules)
# ALLOWED_ORIGINS="http://localhost:5173,https://chatkit.example.com"

# --- Frontend Vite ---
# Domaine et URL personnalisés pour un serveur ChatKit auto-hébergé (optionnels)
# Activez ces variables si vous exposez votre propre implémentation compatible
# avec le protocole ChatKit (par exemple en utilisant `openai-chatkit`).
# Le frontend basculera alors sur cette URL au lieu de récupérer un client
# secret via l'API hébergée.
#
# Le frontend ne nécessite plus de clé API OpenAI : tous les secrets de session
# sont désormais générés via le backend `/api/chatkit/session`.
# VITE_CHATKIT_API_URL="https://chatkit.example.com/chatkit"
# VITE_CHATKIT_DOMAIN_KEY="domain_pk_..." # indispensable dès que vous exposez le frontend sur un domaine vérifié
# VITE_CHATKIT_SKIP_DOMAIN_VERIFICATION="true" # court-circuite la vérification distante (développement uniquement)
# VITE_CHATKIT_UPLOAD_STRATEGY="two_phase"   # ou "direct"
# VITE_CHATKIT_DIRECT_UPLOAD_URL="https://chatkit.example.com/upload" # requis si stratégie "direct"
# VITE_CHATKIT_FORCE_HOSTED="false" # mettre à "true" pour revenir au flux client_secret historique

# Port d'exposition du serveur Vite (optionnel)
# VITE_PORT=5183

# Hôte utilisé pour les connexions HMR (optionnel, utile derrière un tunnel/proxy)
# VITE_HMR_HOST="localhost"
# Exemple derrière Nginx : VITE_HMR_HOST="chatkit.example.com"

# Liste d'hôtes supplémentaires autorisés par Vite (séparés par des virgules)
# VITE_ALLOWED_HOSTS="chatkit.example.com"

# Paramétrage du mode voix côté frontend (optionnel)
# Ces variables permettent d'activer la page /voice et de fournir des valeurs par défaut.
# VITE_VOICE_SESSION_URL="/api/chatkit/voice/session" # endpoint appelé pour générer un secret Realtime éphémère
# VITE_VOICE_DEFAULT_MODEL="gpt-4o-realtime-preview-2024-12-17" # modèle préféré côté navigateur
# VITE_VOICE_DEFAULT_INSTRUCTIONS="Sois chaleureux et garde des réponses courtes" # instructions envoyées si aucune valeur admin
# VITE_VOICE_DEFAULT_VOICE="verse" # voix choisie lorsque l'admin n'a pas encore personnalisé le mode voix

# Protocole et port HMR à ajuster selon votre configuration réseau (optionnels)
# VITE_HMR_PROTOCOL="ws"
# VITE_HMR_CLIENT_PORT=5183
# Exemple derrière Nginx : VITE_HMR_PROTOCOL="wss" et VITE_HMR_CLIENT_PORT=443

# URL du backend à laquelle proxyfier les appels API depuis le frontend (optionnel)
# VITE_BACKEND_URL="http://127.0.0.1:8000"
# Exemple derrière Nginx : VITE_BACKEND_URL="https://chatkit.example.com/api"
